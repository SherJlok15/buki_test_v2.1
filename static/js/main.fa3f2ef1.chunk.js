(this["webpackJsonpbuki_test_v2.1"]=this["webpackJsonpbuki_test_v2.1"]||[]).push([[0],{16:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABmJLR0QA/wD/AP+gvaeTAAABUklEQVQ4y2NgoBpoaGCSPzjJUObgDFWG//8ZMeSBYtJ7ZqkpHO03AKlFkVM91uajeaL2qu7p4v86p0v+aJ6ouaRypD0FJq92uDVN82T1FaDcXyD+D5Q/r3ik0xUiub9HRPtkxWO9M4X/kbHu6ZLfaodaqlSPtlfrnin+jS6vdbLqrtLuDn4GlcNtReiSCEPKPoMwLnmlw835DOrHGibgUkAIqx9tnMCgfLitmVwDlA+3tjDIH5tkqHOy9BOpmoFh9ENhf7sDJBaONk/SO1NEmvOPN6yAR6PKtknsGsfqdxKrGRilF2WOTZdGSQsqhyaJahyv20dIs9ap6usqB9sNsSZGoEv4VI81r9Y7XfQPq7NPNBxTOtmrhj9JA5Os6rHWUp3TpR8QAVb8S/Voy3ypMzO5iM4aSoe7XYBJ9iwoWSvubwshK3/JHOvjFL+4iJuBlgAAMy5tGMbP0m0AAAAASUVORK5CYII="},17:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABmJLR0QA/wD/AP+gvaeTAAABXUlEQVQ4y2NgoBpoaGDyPL3R0O7EGlWG//8ZMeSBYs4n16l5nVpvAFKLItd796zP8XfPr3758+v/21/f/xx59+xSz73zKTD5ifcvpB199+wKUO7vp9+//h98++R8460TrmDJyDObRa5/fvv4PxoAKvw97cHFqqkPLlYDDf6NLn/+46u7LmdW8TNMe3Cp6D8O8OLH188gjEt+4v3z+QzrXtyZ8J9MsObZnQkME+5daCbXgIn3LrYwZFw9aPj8x5dPpGp+/+vHj4LL+x3AAbnw8fVJ/0g0YMOLOyvg0ei5bRv7tpf3dxKr+cyHlxdDL2yWRkkLoee2ie549WAfIc0XPr6+XgT0NtbE6HliG9/CJ9dX//r7F6uPtr96cCz7+mE1/EkamGT77p0tffnz6wdEovr5a8mTm/N9z2zmIj5r3Drucvjd07PH3j2/1Hb7dAhZ+cvy2CpOt4s7uRloCQCaDD49MkE9ywAAAABJRU5ErkJggg=="},21:function(e,t,a){e.exports=a(33)},26:function(e,t,a){},32:function(e,t,a){},33:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),u=a(4),s=a.n(u),i=(a(26),a(6)),o=a(3),l=a(12),c=a(18),d=a(5);function p(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var m="display_data",g="get_input_value",f="send_message",v="toggle_like",E="delete_message",h="enable_edit_mode",y="get_input_value_edit_mode",A="input_edit_mode_key_press",O="input_edit_mode_onblur";function b(){return function(e){fetch("https://api.dev.buki.com.ua/frontend_test").then((function(e){return e.json()})).then((function(t){var a=t.map((function(e){return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?p(a,!0).forEach((function(t){Object(d.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):p(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e,{like:!1,editMode:!1})}));e(function(e){return{type:m,data:e}}(a))}))}}function M(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function C(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?M(a,!0).forEach((function(t){Object(d.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):M(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var k={data:null,usersCount:null,messagesCount:null,lastMessageTime:null,inputValue:"",editInputValue:[]},_={usersCount:function(e){var t=e.map((function(e){return e.user})),a=[],n=!0,r=!1,u=void 0;try{for(var s,i=function(){var e=s.value;0===a.length?a.push(e):void 0===a.find((function(t){return e===t}))&&a.push(e)},o=t[Symbol.iterator]();!(n=(s=o.next()).done);n=!0)i()}catch(l){r=!0,u=l}finally{try{n||null==o.return||o.return()}finally{if(r)throw u}}return a.length},messagesCount:function(e){return e.map((function(e){return e.message})).length},lastMessageTime:function(e){var t=e.map((function(e){return e.created_at})).sort();return t[t.length-1]},getId:function(e){for(var t=[],a=0;a<e;a++){var n=Math.floor(10*Math.random());t.push("1234567890"[n])}return t.join("")},getMessageTime:function(){var e=new Date;return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()+" "+(e.getHours()+":"+e.getMinutes()+":"+e.getSeconds())}};var j=Object(o.c)({mainChat:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m:return C({},e,{data:t.data,usersCount:_.usersCount(t.data),messagesCount:_.messagesCount(t.data),lastMessageTime:_.lastMessageTime(t.data)});case g:return C({},e,{inputValue:t.value});case f:t.event.preventDefault();var a=e.data;if(console.log(e.inputValue),0!==e.inputValue.length){var n={id:_.getId(13),user:"Taylor",avatar:"https://i.pravatar.cc/300?img=12",created_at:_.getMessageTime(),message:"".concat(e.inputValue)};a=[].concat(Object(c.a)(e.data),[n])}return C({},e,{data:a,inputValue:"",usersCount:_.usersCount(a),messagesCount:_.messagesCount(a),lastMessageTime:_.lastMessageTime(a)});case v:var r=e.data.map((function(e){if(e.id===t.id){if(!1===e.like)return e.like=!0,e;if(!0===e.like)return e.like=!1,e}return e}));return C({},e,{data:r});case E:var u=e.data.filter((function(e){return e.id!==t.id}));return C({},e,{data:u,messagesCount:_.messagesCount(u),lastMessageTime:_.lastMessageTime(u)});case h:var s=e.data.map((function(e){return e.id===t.id?(e.editMode=!0,e):e}));return C({},e,{data:s,editInputValue:t.value});case y:return C({},e,{editInputValue:t.value});case A:console.log(t.event.charCode);var i=e.data;return("Enter"===t.event.key&&""!==e.editInputValue||27===t.event.keyCode)&&(i=e.data.map((function(a){return a.id===t.id?(a.message=e.editInputValue,a.editMode=!1,a):a}))),C({},e,{data:i});case O:var o=e.data.map((function(a){return a.id===t.id?(a.message=e.editInputValue,a.editMode=!1,a):a}));return C({},e,{data:o});default:return e}}}),P=Object(o.d)(j,Object(o.a)(l.a));window.store=P;var V=P,w=(a(32),a(13)),N=a(14),D=a(19),I=a(15),T=a(20);var B=function(e){return r.a.createElement("header",null,r.a.createElement("div",{className:"header_logo_container"},r.a.createElement("div",{className:"logo"},r.a.createElement("a",{href:"#"},"My Chat")),r.a.createElement("div",{className:"header_info"},null===e.usersCount?r.a.createElement("div",null,"0"):r.a.createElement("div",null,e.usersCount," users"),null===e.messagesCount?r.a.createElement("div",null,"0"):r.a.createElement("div",null,e.messagesCount," messages"))),r.a.createElement("div",{className:"time_block"},"Last message: ",e.lastMessageTime))},L=a(16),S=a.n(L),J=a(17),x=a.n(J);var K=function(e){return r.a.createElement("div",{className:"chat_list"},null===e.data?r.a.createElement("div",null,"'Loading Please waite'"):e.data.map((function(t){return r.a.createElement("div",{key:t.id,className:"Taylor"===t.user?"top_item":"item"},r.a.createElement("div",{className:"avatar"},r.a.createElement("img",{src:t.avatar,alt:t.user})),r.a.createElement("div",{className:"item_content"},r.a.createElement("p",{className:"user_name"},t.user),r.a.createElement("p",{className:"created_at"},t.created_at),r.a.createElement("span",{className:"control_message"},t.editMode?r.a.createElement("input",{autoFocus:!0,onBlur:function(){return e.inputEditModeOnBlur(t.id)},className:"input_edit_mode",value:e.editInputValue,onChange:function(t){return e.getInputValueEditMode(t)},onKeyPress:function(a){return e.inputEditModeKeyPress(a,t.id)}}):r.a.createElement("span",{className:"user_message"},t.message),r.a.createElement("div",{className:"edit_mode"},"Taylor"===t.user?r.a.createElement("span",{onClick:function(){return e.enableEditMode(t.id,t.message)}},"Edit"):"","Taylor"===t.user?r.a.createElement("span",{onClick:function(){return e.deleteMessage(t.id)}},"Delete"):"")),r.a.createElement("div",{className:"like_container"},"Taylor"===t.user?"":r.a.createElement("p",{onClick:function(){return e.toggleLike(t.id)}},t.like?r.a.createElement("img",{src:S.a}):r.a.createElement("img",{src:x.a})))))})))};var R=function(e){return r.a.createElement("div",{className:"messageInputBlock"},r.a.createElement("div",{className:"input_container"},r.a.createElement("input",{type:"text",placeholder:"Type something...",value:e.inputValue,onChange:function(t){return e.getInputValue(t)}})),r.a.createElement("div",{className:"button_container"},r.a.createElement("button",{onClick:function(t){return e.sendMessage(t)},disabled:!e.inputValue},"Send")))};var G=function(e){return r.a.createElement("footer",null,r.a.createElement("div",{className:"footer_container"},r.a.createElement("nav",null,r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("a",{href:"#"},"Home")),r.a.createElement("li",null,r.a.createElement("a",{href:"#"},"About")),r.a.createElement("li",null,r.a.createElement("a",{href:"#"},"Contact us")))),r.a.createElement("div",{className:"info"},r.a.createElement("p",null,"@ Copyright 2019"))))},H=function(e){function t(){return Object(w.a)(this,t),Object(D.a)(this,Object(I.a)(t).apply(this,arguments))}return Object(T.a)(t,e),Object(N.a)(t,[{key:"componentWillMount",value:function(){this.props.loadData()}},{key:"render",value:function(e){return r.a.createElement("div",{className:"wrapper"},r.a.createElement("div",{className:"content"},r.a.createElement(B,{usersCount:this.props.usersCount,messagesCount:this.props.messagesCount,lastMessageTime:this.props.lastMessageTime}),r.a.createElement(K,{data:this.props.data,toggleLike:this.props.toggleLike,deleteMessage:this.props.deleteMessage,enableEditMode:this.props.enableEditMode,editInputValue:this.props.editInputValue,getInputValueEditMode:this.props.getInputValueEditMode,inputEditModeKeyPress:this.props.inputEditModeKeyPress,inputEditModeOnBlur:this.props.inputEditModeOnBlur}),r.a.createElement(R,{getInputValue:this.props.getInputValue,sendMessage:this.props.sendMessage,inputValue:this.props.inputValue})),r.a.createElement(G,null))}}]),t}(n.Component);var Q=Object(i.b)((function(e){return{data:e.mainChat.data,usersCount:e.mainChat.usersCount,messagesCount:e.mainChat.messagesCount,lastMessageTime:e.mainChat.lastMessageTime,inputValue:e.mainChat.inputValue,editInputValue:e.mainChat.editInputValue}}),(function(e){return{loadData:function(){return e(b())},getInputValue:function(t){return e((a=t.target.value,{type:g,value:a}));var a},sendMessage:function(t){return e(function(e){return{type:f,event:e}}(t))},toggleLike:function(t){return e(function(e){return{type:v,id:e}}(t))},deleteMessage:function(t){return e(function(e){return{type:E,id:e}}(t))},enableEditMode:function(t,a){return e(function(e,t){return{type:h,id:e,value:t}}(t,a))},getInputValueEditMode:function(t){return e((a=t.target.value,{type:y,value:a}));var a},inputEditModeKeyPress:function(t,a){return e(function(e,t){return{type:A,event:e,id:t}}(t,a))},inputEditModeOnBlur:function(t){return e(function(e){return{type:O,id:e}}(t))}}}))(H);var q=function(){return r.a.createElement(i.a,{store:V},r.a.createElement(Q,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(q,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[21,1,2]]]);
//# sourceMappingURL=main.fa3f2ef1.chunk.js.map